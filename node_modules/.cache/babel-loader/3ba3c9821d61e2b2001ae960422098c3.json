{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\n// Utils\nimport { createNamespace } from '../utils'; // Components\n\nimport Tab from '../tab';\nimport Tabs from '../tabs';\nimport Field from '../field';\nimport Button from '../button';\nimport Coupon from '../coupon';\n\nvar _createNamespace = createNamespace('coupon-list'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nvar EMPTY_IMAGE = 'https://img01.yzcdn.cn/vant/coupon-empty.png';\nexport default createComponent({\n  model: {\n    prop: 'code'\n  },\n  props: {\n    code: String,\n    closeButtonText: String,\n    inputPlaceholder: String,\n    enabledTitle: String,\n    disabledTitle: String,\n    exchangeButtonText: String,\n    exchangeButtonLoading: Boolean,\n    exchangeButtonDisabled: Boolean,\n    exchangeMinLength: {\n      type: Number,\n      default: 1\n    },\n    chosenCoupon: {\n      type: Number,\n      default: -1\n    },\n    coupons: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    disabledCoupons: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    displayedCouponIndex: {\n      type: Number,\n      default: -1\n    },\n    showExchangeBar: {\n      type: Boolean,\n      default: true\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    },\n    showCount: {\n      type: Boolean,\n      default: true\n    },\n    currency: {\n      type: String,\n      default: '¥'\n    },\n    emptyImage: {\n      type: String,\n      default: EMPTY_IMAGE\n    }\n  },\n  data: function data() {\n    return {\n      tab: 0,\n      winHeight: window.innerHeight,\n      currentCode: this.code || ''\n    };\n  },\n  computed: {\n    buttonDisabled: function buttonDisabled() {\n      return !this.exchangeButtonLoading && (this.exchangeButtonDisabled || !this.currentCode || this.currentCode.length < this.exchangeMinLength);\n    },\n    listStyle: function listStyle() {\n      return {\n        height: this.winHeight - (this.showExchangeBar ? 140 : 94) + 'px'\n      };\n    }\n  },\n  watch: {\n    code: function code(_code) {\n      this.currentCode = _code;\n    },\n    currentCode: function currentCode(code) {\n      this.$emit('input', code);\n    },\n    displayedCouponIndex: 'scrollToShowCoupon'\n  },\n  mounted: function mounted() {\n    this.scrollToShowCoupon(this.displayedCouponIndex);\n  },\n  methods: {\n    onClickExchangeButton: function onClickExchangeButton() {\n      this.$emit('exchange', this.currentCode); // auto clear currentCode when not use vModel\n\n      if (!this.code) {\n        this.currentCode = '';\n      }\n    },\n    // scroll to show specific coupon\n    scrollToShowCoupon: function scrollToShowCoupon(index) {\n      var _this = this;\n\n      if (index === -1) {\n        return;\n      }\n\n      this.$nextTick(function () {\n        var _this$$refs = _this.$refs,\n            card = _this$$refs.card,\n            list = _this$$refs.list;\n        /* istanbul ignore next */\n\n        if (list && card && card[index]) {\n          list.scrollTop = card[index].$el.offsetTop - 100;\n        }\n      });\n    },\n    genEmpty: function genEmpty() {\n      var h = this.$createElement;\n      return h(\"div\", {\n        \"class\": bem('empty')\n      }, [h(\"img\", {\n        \"attrs\": {\n          \"src\": this.emptyImage\n        }\n      }), h(\"p\", [t('empty')])]);\n    },\n    genExchangeButton: function genExchangeButton() {\n      var h = this.$createElement;\n      return h(Button, {\n        \"attrs\": {\n          \"plain\": true,\n          \"type\": \"danger\",\n          \"text\": this.exchangeButtonText || t('exchange'),\n          \"loading\": this.exchangeButtonLoading,\n          \"disabled\": this.buttonDisabled\n        },\n        \"class\": bem('exchange'),\n        \"on\": {\n          \"click\": this.onClickExchangeButton\n        }\n      });\n    }\n  },\n  render: function render() {\n    var _this2 = this;\n\n    var h = arguments[0];\n    var coupons = this.coupons,\n        disabledCoupons = this.disabledCoupons;\n    var count = this.showCount ? \" (\" + coupons.length + \")\" : '';\n    var title = (this.enabledTitle || t('enable')) + count;\n    var disabledCount = this.showCount ? \" (\" + disabledCoupons.length + \")\" : '';\n    var disabledTitle = (this.disabledTitle || t('disabled')) + disabledCount;\n    var ExchangeBar = this.showExchangeBar && h(\"div\", {\n      \"class\": bem('exchange-bar')\n    }, [h(Field, {\n      \"attrs\": {\n        \"clearable\": true,\n        \"border\": false,\n        \"placeholder\": this.inputPlaceholder || t('placeholder'),\n        \"maxlength\": \"20\"\n      },\n      \"class\": bem('field'),\n      \"model\": {\n        value: _this2.currentCode,\n        callback: function callback($$v) {\n          _this2.currentCode = $$v;\n        }\n      }\n    }), this.genExchangeButton()]);\n\n    var onChange = function onChange(index) {\n      return function () {\n        return _this2.$emit('change', index);\n      };\n    };\n\n    var CouponTab = h(Tab, {\n      \"attrs\": {\n        \"title\": title\n      }\n    }, [h(\"div\", {\n      \"class\": bem('list', {\n        'with-bottom': this.showCloseButton\n      }),\n      \"style\": this.listStyle\n    }, [coupons.map(function (coupon, index) {\n      return h(Coupon, {\n        \"ref\": \"card\",\n        \"key\": coupon.id,\n        \"attrs\": {\n          \"coupon\": coupon,\n          \"currency\": _this2.currency,\n          \"chosen\": index === _this2.chosenCoupon\n        },\n        \"nativeOn\": {\n          \"click\": onChange(index)\n        }\n      });\n    }), !coupons.length && this.genEmpty(), this.slots('list-footer')])]);\n    var DisabledCouponTab = h(Tab, {\n      \"attrs\": {\n        \"title\": disabledTitle\n      }\n    }, [h(\"div\", {\n      \"class\": bem('list', {\n        'with-bottom': this.showCloseButton\n      }),\n      \"style\": this.listStyle\n    }, [disabledCoupons.map(function (coupon) {\n      return h(Coupon, {\n        \"attrs\": {\n          \"disabled\": true,\n          \"coupon\": coupon,\n          \"currency\": _this2.currency\n        },\n        \"key\": coupon.id\n      });\n    }), !disabledCoupons.length && this.genEmpty(), this.slots('disabled-list-footer')])]);\n    return h(\"div\", {\n      \"class\": bem()\n    }, [ExchangeBar, h(Tabs, {\n      \"class\": bem('tab'),\n      \"attrs\": {\n        \"border\": false\n      },\n      \"model\": {\n        value: _this2.tab,\n        callback: function callback($$v) {\n          _this2.tab = $$v;\n        }\n      }\n    }, [CouponTab, DisabledCouponTab]), h(\"div\", {\n      \"class\": bem('bottom')\n    }, [h(Button, {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showCloseButton\n      }],\n      \"attrs\": {\n        \"round\": true,\n        \"type\": \"danger\",\n        \"block\": true,\n        \"text\": this.closeButtonText || t('close')\n      },\n      \"class\": bem('close'),\n      \"on\": {\n        \"click\": onChange(-1)\n      }\n    })])]);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lisp/Desktop/Vue-app/items/node_modules/vant/es/coupon-list/index.js"],"names":["createNamespace","Tab","Tabs","Field","Button","Coupon","_createNamespace","createComponent","bem","t","EMPTY_IMAGE","model","prop","props","code","String","closeButtonText","inputPlaceholder","enabledTitle","disabledTitle","exchangeButtonText","exchangeButtonLoading","Boolean","exchangeButtonDisabled","exchangeMinLength","type","Number","default","chosenCoupon","coupons","Array","_default","disabledCoupons","displayedCouponIndex","showExchangeBar","showCloseButton","showCount","currency","emptyImage","data","tab","winHeight","window","innerHeight","currentCode","computed","buttonDisabled","length","listStyle","height","watch","_code","$emit","mounted","scrollToShowCoupon","methods","onClickExchangeButton","index","_this","$nextTick","_this$$refs","$refs","card","list","scrollTop","$el","offsetTop","genEmpty","h","$createElement","genExchangeButton","render","_this2","arguments","count","title","disabledCount","ExchangeBar","value","callback","$$v","onChange","CouponTab","map","coupon","id","slots","DisabledCouponTab","name"],"mappings":"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","sourcesContent":["// Utils\nimport { createNamespace } from '../utils'; // Components\n\nimport Tab from '../tab';\nimport Tabs from '../tabs';\nimport Field from '../field';\nimport Button from '../button';\nimport Coupon from '../coupon';\n\nvar _createNamespace = createNamespace('coupon-list'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nvar EMPTY_IMAGE = 'https://img01.yzcdn.cn/vant/coupon-empty.png';\nexport default createComponent({\n  model: {\n    prop: 'code'\n  },\n  props: {\n    code: String,\n    closeButtonText: String,\n    inputPlaceholder: String,\n    enabledTitle: String,\n    disabledTitle: String,\n    exchangeButtonText: String,\n    exchangeButtonLoading: Boolean,\n    exchangeButtonDisabled: Boolean,\n    exchangeMinLength: {\n      type: Number,\n      default: 1\n    },\n    chosenCoupon: {\n      type: Number,\n      default: -1\n    },\n    coupons: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    disabledCoupons: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    displayedCouponIndex: {\n      type: Number,\n      default: -1\n    },\n    showExchangeBar: {\n      type: Boolean,\n      default: true\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    },\n    showCount: {\n      type: Boolean,\n      default: true\n    },\n    currency: {\n      type: String,\n      default: '¥'\n    },\n    emptyImage: {\n      type: String,\n      default: EMPTY_IMAGE\n    }\n  },\n  data: function data() {\n    return {\n      tab: 0,\n      winHeight: window.innerHeight,\n      currentCode: this.code || ''\n    };\n  },\n  computed: {\n    buttonDisabled: function buttonDisabled() {\n      return !this.exchangeButtonLoading && (this.exchangeButtonDisabled || !this.currentCode || this.currentCode.length < this.exchangeMinLength);\n    },\n    listStyle: function listStyle() {\n      return {\n        height: this.winHeight - (this.showExchangeBar ? 140 : 94) + 'px'\n      };\n    }\n  },\n  watch: {\n    code: function code(_code) {\n      this.currentCode = _code;\n    },\n    currentCode: function currentCode(code) {\n      this.$emit('input', code);\n    },\n    displayedCouponIndex: 'scrollToShowCoupon'\n  },\n  mounted: function mounted() {\n    this.scrollToShowCoupon(this.displayedCouponIndex);\n  },\n  methods: {\n    onClickExchangeButton: function onClickExchangeButton() {\n      this.$emit('exchange', this.currentCode); // auto clear currentCode when not use vModel\n\n      if (!this.code) {\n        this.currentCode = '';\n      }\n    },\n    // scroll to show specific coupon\n    scrollToShowCoupon: function scrollToShowCoupon(index) {\n      var _this = this;\n\n      if (index === -1) {\n        return;\n      }\n\n      this.$nextTick(function () {\n        var _this$$refs = _this.$refs,\n            card = _this$$refs.card,\n            list = _this$$refs.list;\n        /* istanbul ignore next */\n\n        if (list && card && card[index]) {\n          list.scrollTop = card[index].$el.offsetTop - 100;\n        }\n      });\n    },\n    genEmpty: function genEmpty() {\n      var h = this.$createElement;\n      return h(\"div\", {\n        \"class\": bem('empty')\n      }, [h(\"img\", {\n        \"attrs\": {\n          \"src\": this.emptyImage\n        }\n      }), h(\"p\", [t('empty')])]);\n    },\n    genExchangeButton: function genExchangeButton() {\n      var h = this.$createElement;\n      return h(Button, {\n        \"attrs\": {\n          \"plain\": true,\n          \"type\": \"danger\",\n          \"text\": this.exchangeButtonText || t('exchange'),\n          \"loading\": this.exchangeButtonLoading,\n          \"disabled\": this.buttonDisabled\n        },\n        \"class\": bem('exchange'),\n        \"on\": {\n          \"click\": this.onClickExchangeButton\n        }\n      });\n    }\n  },\n  render: function render() {\n    var _this2 = this;\n\n    var h = arguments[0];\n    var coupons = this.coupons,\n        disabledCoupons = this.disabledCoupons;\n    var count = this.showCount ? \" (\" + coupons.length + \")\" : '';\n    var title = (this.enabledTitle || t('enable')) + count;\n    var disabledCount = this.showCount ? \" (\" + disabledCoupons.length + \")\" : '';\n    var disabledTitle = (this.disabledTitle || t('disabled')) + disabledCount;\n    var ExchangeBar = this.showExchangeBar && h(\"div\", {\n      \"class\": bem('exchange-bar')\n    }, [h(Field, {\n      \"attrs\": {\n        \"clearable\": true,\n        \"border\": false,\n        \"placeholder\": this.inputPlaceholder || t('placeholder'),\n        \"maxlength\": \"20\"\n      },\n      \"class\": bem('field'),\n      \"model\": {\n        value: _this2.currentCode,\n        callback: function callback($$v) {\n          _this2.currentCode = $$v;\n        }\n      }\n    }), this.genExchangeButton()]);\n\n    var onChange = function onChange(index) {\n      return function () {\n        return _this2.$emit('change', index);\n      };\n    };\n\n    var CouponTab = h(Tab, {\n      \"attrs\": {\n        \"title\": title\n      }\n    }, [h(\"div\", {\n      \"class\": bem('list', {\n        'with-bottom': this.showCloseButton\n      }),\n      \"style\": this.listStyle\n    }, [coupons.map(function (coupon, index) {\n      return h(Coupon, {\n        \"ref\": \"card\",\n        \"key\": coupon.id,\n        \"attrs\": {\n          \"coupon\": coupon,\n          \"currency\": _this2.currency,\n          \"chosen\": index === _this2.chosenCoupon\n        },\n        \"nativeOn\": {\n          \"click\": onChange(index)\n        }\n      });\n    }), !coupons.length && this.genEmpty(), this.slots('list-footer')])]);\n    var DisabledCouponTab = h(Tab, {\n      \"attrs\": {\n        \"title\": disabledTitle\n      }\n    }, [h(\"div\", {\n      \"class\": bem('list', {\n        'with-bottom': this.showCloseButton\n      }),\n      \"style\": this.listStyle\n    }, [disabledCoupons.map(function (coupon) {\n      return h(Coupon, {\n        \"attrs\": {\n          \"disabled\": true,\n          \"coupon\": coupon,\n          \"currency\": _this2.currency\n        },\n        \"key\": coupon.id\n      });\n    }), !disabledCoupons.length && this.genEmpty(), this.slots('disabled-list-footer')])]);\n    return h(\"div\", {\n      \"class\": bem()\n    }, [ExchangeBar, h(Tabs, {\n      \"class\": bem('tab'),\n      \"attrs\": {\n        \"border\": false\n      },\n      \"model\": {\n        value: _this2.tab,\n        callback: function callback($$v) {\n          _this2.tab = $$v;\n        }\n      }\n    }, [CouponTab, DisabledCouponTab]), h(\"div\", {\n      \"class\": bem('bottom')\n    }, [h(Button, {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showCloseButton\n      }],\n      \"attrs\": {\n        \"round\": true,\n        \"type\": \"danger\",\n        \"block\": true,\n        \"text\": this.closeButtonText || t('close')\n      },\n      \"class\": bem('close'),\n      \"on\": {\n        \"click\": onChange(-1)\n      }\n    })])]);\n  }\n});"]},"metadata":{},"sourceType":"module"}